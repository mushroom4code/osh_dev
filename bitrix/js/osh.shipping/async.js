/*!
 * async 0.2.8
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */
!function(){var n,t,e={};function r(t){var e=!1;return function(){if(e)throw new Error("Callback was already called.");e=!0,t.apply(n,arguments)}}null!=(n=this)&&(t=n.async),e.noConflict=function(){return n.async=t,e};var i=function(n,t){if(n.forEach)return n.forEach(t);for(var e=0;e<n.length;e+=1)t(n[e],e,n)},u=function(n,t){if(n.map)return n.map(t);var e=[];return i(n,function(n,r,i){e.push(t(n,r,i))}),e},c=function(n){if(Object.keys)return Object.keys(n);var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t};"undefined"!=typeof process&&process.nextTick?(e.nextTick=process.nextTick,"undefined"!=typeof setImmediate?e.setImmediate=setImmediate:e.setImmediate=e.nextTick):"function"==typeof setImmediate?(e.setImmediate=setImmediate,e.nextTick=setImmediate):(e.nextTick=function(n){setTimeout(n,0)},e.setImmediate=e.nextTick),e.each=function(n,t,e){if(e=e||function(){},!n.length)return e();var u=0;i(n,function(i){t(i,r(function(t){t?(e(t),e=function(){}):(u+=1)>=n.length&&e(null)}))})},e.forEach=e.each,e.eachSeries=function(n,t,e){if(e=e||function(){},!n.length)return e();var r=0,i=function(){t(n[r],function(t){t?(e(t),e=function(){}):(r+=1)>=n.length?e(null):i()})};i()},e.forEachSeries=e.eachSeries,e.eachLimit=function(n,t,e,r){o(t).apply(null,[n,e,r])},e.forEachLimit=e.eachLimit;var o=function(n){return function(t,e,r){if(r=r||function(){},!t.length||n<=0)return r();var i=0,u=0,c=0;!function o(){if(i>=t.length)return r();for(;c<n&&u<t.length;)c+=1,e(t[(u+=1)-1],function(n){n?(r(n),r=function(){}):(c-=1,(i+=1)>=t.length?r():o())})}()}},a=function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[e.each].concat(t))}},l=function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[e.eachSeries].concat(t))}},f=function(n,t,e,r){var i=[];n(t=u(t,function(n,t){return{index:t,value:n}}),function(n,t){e(n.value,function(e,r){i[n.index]=r,t(e)})},function(n){r(n,i)})};e.map=a(f),e.mapSeries=l(f),e.mapLimit=function(n,t,e,r){return s(t)(n,e,r)};var s=function(n){return t=n,e=f,function(){var n=Array.prototype.slice.call(arguments);return e.apply(null,[o(t)].concat(n))};var t,e};e.reduce=function(n,t,r,i){e.eachSeries(n,function(n,e){r(t,n,function(n,r){t=r,e(n)})},function(n){i(n,t)})},e.inject=e.reduce,e.foldl=e.reduce,e.reduceRight=function(n,t,r,i){var c=u(n,function(n){return n}).reverse();e.reduce(c,t,r,i)},e.foldr=e.reduceRight;var p=function(n,t,e,r){var i=[];n(t=u(t,function(n,t){return{index:t,value:n}}),function(n,t){e(n.value,function(e){e&&i.push(n),t()})},function(n){r(u(i.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})};e.filter=a(p),e.filterSeries=l(p),e.select=e.filter,e.selectSeries=e.filterSeries;var y=function(n,t,e,r){var i=[];n(t=u(t,function(n,t){return{index:t,value:n}}),function(n,t){e(n.value,function(e){e||i.push(n),t()})},function(n){r(u(i.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})};e.reject=a(y),e.rejectSeries=l(y);var h=function(n,t,e,r){n(t,function(n,t){e(n,function(e){e?(r(n),r=function(){}):t()})},function(n){r()})};e.detect=a(h),e.detectSeries=l(h),e.some=function(n,t,r){e.each(n,function(n,e){t(n,function(n){n&&(r(!0),r=function(){}),e()})},function(n){r(!1)})},e.any=e.some,e.every=function(n,t,r){e.each(n,function(n,e){t(n,function(n){n||(r(!1),r=function(){}),e()})},function(n){r(!0)})},e.all=e.every,e.sortBy=function(n,t,r){e.map(n,function(n,e){t(n,function(t,r){t?e(t):e(null,{value:n,criteria:r})})},function(n,t){if(n)return r(n);r(null,u(t.sort(function(n,t){var e=n.criteria,r=t.criteria;return e<r?-1:e>r?1:0}),function(n){return n.value}))})},e.auto=function(n,t){t=t||function(){};var r=c(n);if(!r.length)return t(null);var u={},o=[],a=function(n){o.unshift(n)},l=function(){i(o.slice(0),function(n){n()})};a(function(){c(u).length===r.length&&(t(null,u),t=function(){})}),i(r,function(r){var f=n[r]instanceof Function?[n[r]]:n[r],s=function(n){var o=Array.prototype.slice.call(arguments,1);if(o.length<=1&&(o=o[0]),n){var a={};i(c(u),function(n){a[n]=u[n]}),a[r]=o,t(n,a),t=function(){}}else u[r]=o,e.setImmediate(l)},p=f.slice(0,Math.abs(f.length-1))||[],y=function(){return t=function(n,t){return n&&u.hasOwnProperty(t)},e=!0,((n=p).reduce?n.reduce(t,e):(i(n,function(n,r,i){e=t(e,n,r,i)}),e))&&!u.hasOwnProperty(r);var n,t,e};if(y())f[f.length-1](s,u);else{var h=function(){y()&&(!function(n){for(var t=0;t<o.length;t+=1)if(o[t]===n)return void o.splice(t,1)}(h),f[f.length-1](s,u))};a(h)}})},e.waterfall=function(n,t){if(t=t||function(){},n.constructor!==Array){var r=new Error("First argument to waterfall must be an array of functions");return t(r)}if(!n.length)return t();var i=function(n){return function(r){if(r)t.apply(null,arguments),t=function(){};else{var u=Array.prototype.slice.call(arguments,1),c=n.next();c?u.push(i(c)):u.push(t),e.setImmediate(function(){n.apply(null,u)})}}};i(e.iterator(n))()};var v=function(n,t,e){if(e=e||function(){},t.constructor===Array)n.map(t,function(n,t){n&&n(function(n){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),t.call(null,n,e)})},e);else{var r={};n.each(c(t),function(n,e){t[n](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[n]=i,e(t)})},function(n){e(n,r)})}};e.parallel=function(n,t){v({map:e.map,each:e.each},n,t)},e.parallelLimit=function(n,t,e){v({map:s(t),each:o(t)},n,e)},e.series=function(n,t){if(t=t||function(){},n.constructor===Array)e.mapSeries(n,function(n,t){n&&n(function(n){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),t.call(null,n,e)})},t);else{var r={};e.eachSeries(c(n),function(t,e){n[t](function(n){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[t]=i,e(n)})},function(n){t(n,r)})}},e.iterator=function(n){var t=function(e){var r=function(){return n.length&&n[e].apply(null,arguments),r.next()};return r.next=function(){return e<n.length-1?t(e+1):null},r};return t(0)},e.apply=function(n){var t=Array.prototype.slice.call(arguments,1);return function(){return n.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var d=function(n,t,e,r){var i=[];n(t,function(n,t){e(n,function(n,e){i=i.concat(e||[]),t(n)})},function(n){r(n,i)})};e.concat=a(d),e.concatSeries=l(d),e.whilst=function(n,t,r){n()?t(function(i){if(i)return r(i);e.whilst(n,t,r)}):r()},e.doWhilst=function(n,t,r){n(function(i){if(i)return r(i);t()?e.doWhilst(n,t,r):r()})},e.until=function(n,t,r){n()?r():t(function(i){if(i)return r(i);e.until(n,t,r)})},e.doUntil=function(n,t,r){n(function(i){if(i)return r(i);t()?r():e.doUntil(n,t,r)})},e.queue=function(n,t){function u(n,r,u,c){r.constructor!==Array&&(r=[r]),i(r,function(r){var i={data:r,callback:"function"==typeof c?c:null};u?n.tasks.unshift(i):n.tasks.push(i),n.saturated&&n.tasks.length===t&&n.saturated(),e.setImmediate(n.process)})}void 0===t&&(t=1);var c=0,o={tasks:[],concurrency:t,saturated:null,empty:null,drain:null,push:function(n,t){u(o,n,!1,t)},unshift:function(n,t){u(o,n,!0,t)},process:function(){if(c<o.concurrency&&o.tasks.length){var t=o.tasks.shift();o.empty&&0===o.tasks.length&&o.empty(),c+=1;var e=r(function(){c-=1,t.callback&&t.callback.apply(t,arguments),o.drain&&o.tasks.length+c===0&&o.drain(),o.process()});n(t.data,e)}},length:function(){return o.tasks.length},running:function(){return c}};return o},e.cargo=function(n,t){var r=!1,c=[],o={tasks:c,payload:t,saturated:null,empty:null,drain:null,push:function(n,r){n.constructor!==Array&&(n=[n]),i(n,function(n){c.push({data:n,callback:"function"==typeof r?r:null}),o.saturated&&c.length===t&&o.saturated()}),e.setImmediate(o.process)},process:function e(){if(!r)if(0!==c.length){var a="number"==typeof t?c.splice(0,t):c.splice(0),l=u(a,function(n){return n.data});o.empty&&o.empty(),r=!0,n(l,function(){r=!1;var n=arguments;i(a,function(t){t.callback&&t.callback.apply(null,n)}),e()})}else o.drain&&o.drain()},length:function(){return c.length},running:function(){return r}};return o};var m=function(n){return function(t){var e=Array.prototype.slice.call(arguments,1);t.apply(null,e.concat([function(t){var e=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[n]&&i(e,function(t){console[n](t)}))}]))}};e.log=m("log"),e.dir=m("dir"),e.memoize=function(n,t){var e={},r={};t=t||function(n){return n};var i=function(){var i=Array.prototype.slice.call(arguments),u=i.pop(),c=t.apply(null,i);c in e?u.apply(null,e[c]):c in r?r[c].push(u):(r[c]=[u],n.apply(null,i.concat([function(){e[c]=arguments;var n=r[c];delete r[c];for(var t=0,i=n.length;t<i;t++)n[t].apply(null,arguments)}])))};return i.memo=e,i.unmemoized=n,i},e.unmemoize=function(n){return function(){return(n.unmemoized||n).apply(null,arguments)}},e.times=function(n,t,r){for(var i=[],u=0;u<n;u++)i.push(u);return e.map(i,t,r)},e.timesSeries=function(n,t,r){for(var i=[],u=0;u<n;u++)i.push(u);return e.mapSeries(i,t,r)},e.compose=function(){var n=Array.prototype.reverse.call(arguments);return function(){var t=this,r=Array.prototype.slice.call(arguments),i=r.pop();e.reduce(n,r,function(n,e,r){e.apply(t,n.concat([function(){var n=arguments[0],t=Array.prototype.slice.call(arguments,1);r(n,t)}]))},function(n,e){i.apply(t,[n].concat(e))})}};var g=function(n,t){var e=function(){var e=this,r=Array.prototype.slice.call(arguments),i=r.pop();return n(t,function(n,t){n.apply(e,r.concat([t]))},i)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return e.apply(this,r)}return e};e.applyEach=a(g),e.applyEachSeries=l(g),e.forever=function(n,t){!function e(r){if(r){if(t)return t(r);throw r}n(e)}()},"undefined"!=typeof define&&define.amd?define([],function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:n.async=e}();